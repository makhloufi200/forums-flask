<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Forums Workshop</title>
    
    <link rel="stylesheet" type="text/css" href="/static/style.css">
</head>

<body>

    <div class="centered-item">
        <marquee>
            <h1>One Million Arab Coders</h1>
        </marquee>
    </div>

    <div class="centered-item" align="center">
        <a href="#">Members</a>

        <a href="#">Profile</a>
    </div>

    <div class="content">
        <a href="/topic_add">Create</a>
        <table>

            <thead>
                <tr>
                    <th>
                        Title
                    </th>

                    <th>
                        Edit
                    </th>

                    <th>
                        Delete
                    </th>
                </tr>
            </thead>

            <tbody>
            {% for post in posts %}
                <tr>
                    <td>
                        <a href="{{ url_for('topic_show', id=post.id) }}">{{post.title}}</a>
                    </td>

                    <td>
                        <a href="{{ url_for('topic_edit', id=post.id) }}">edit</a>
                    </td>

                    <td>
                        <a id="{{post.id}}" href="#">delete</a>
                    </td>
                    <!--<td>-->
                        <!--<button class="btn btn-default"><a href="{{ url_for('topic_show', id=post.id) }}">Show Topic</a></button>-->
                    <!--</td>-->
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <footer align="right">
        <h4>Done by: Makhloufi Smail</h4>
    </footer>
</body>
<script
   src="https://code.jquery.com/jquery-3.3.1.min.js"
   integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
   crossorigin="anonymous"></script>

<script>
   $(function ()
    {
        $("a").click(function(event){
            var id = event.target.id;
            $.ajax({
                type: "DELETE",
                url: "/api/topic/delete/"+id,
                success: function (response)
                {
                    alert("Delete topic successfully !");
                    location.reload();
                }
            });
        });
    });
</script>
</html>

